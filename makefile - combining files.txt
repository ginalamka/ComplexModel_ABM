#this is to combine output files generated using my ABM

#ideally, this will be combined in the bottom of the main makefile that runs the ABM, but for now I want to make sure it works!

#makefile
# GFL edits 10/14/2022

# Original created:
# Date: 4/2/2015 - Created by Mark Christie
# set paths, directories, and filenames

# JW update:14 Oct 2015; AH update for Easley: 24 May 2022
# GL update for 20 directories: 8 June 2022

## Script
FILE1 = run_R_model.sh
FILE2 = Cover.R
FILE3 = FunctionSourcer.R
FILE4 = rep_summary_${PROJ}_${DIRECTORY}  >>will need to rename these I think!

## Set project name
USER = glamka
PROJ = ABM_run.10.13.22_dd

## Set dir names
HOMEDIR = /home/gfl0003/ABM_sep2022
SCRATCHDIR = /scratch/${USER}/${PROJ}

## Each directory will only contain the scripts used to process that particular
## set of model replicates
DIRECTORY1 = 01
DIRECTORY2 = 02
DIRECTORY3 = 03
DIRECTORY4 = 04
DIRECTORY5 = 05
DIRECTORY6 = 06
DIRECTORY7 = 07
DIRECTORY8 = 08
DIRECTORY9 = 09
DIRECTORY10 = 10
DIRECTORY11 = 11
DIRECTORY12 = 12
DIRECTORY13 = 13
DIRECTORY14 = 14
DIRECTORY15 = 15
DIRECTORY16 = 16
DIRECTORY17 = 17
DIRECTORY18 = 18
DIRECTORY19 = 19
DIRECTORY20 = 20


all:
        @echo "Please type....."
        @echo "    make directories"
        @echo "    make scripts"
        @echo "    make setgroups"
        @echo "    make submit"


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~````
From Janna:


PATHDIR = /scratch/snyder/j/jwillou/ibm_captivity/salmon

DIRECTORY1 = R01
DIRECTORY2 = R02
DIRECTORY3 = R03
DIRECTORY4 = R04
DIRECTORY5 = R05
DIRECTORY6 = R06
DIRECTORY7 = R07
DIRECTORY8 = R08
DIRECTORY9 = R09
DIRECTORY10 = R10
DIRECTORY11 = R11
DIRECTORY12 = R12
DIRECTORY13 = R13
DIRECTORY14 = R14
DIRECTORY15 = R15
DIRECTORY16 = R16
DIRECTORY17 = R17
DIRECTORY18 = R18
DIRECTORY19 = R19
DIRECTORY20 = R20


FILE1 = model2.2
FILE1.2 = "RRSmodel.R"
FILE1.3 = "simulation.job"
FILE2.1 = "model2.2/output/sourcepopsummaryoutput.csv"
FILE2.2 = "model2.2/output/newpopsummaryoutput.csv"
FILE2.3 = "model2.2/output/sourcepopcondensed_individuals.csv"
FILE2.4 = "model2.2/output/newpopcondensed_individuals.csv"
FILE2.5 = "model2.2/output/all_population_indvs.csv"
FILE4 = model2.2/output
all:
	@echo "Please type....."
	@echo "    make directories"
	@echo "    make setwd"
	@echo "    make rbatch"
	@echo "    make filemerge"
	@echo "    make output"
	@echo "    make Allclean"


directories:
	@echo "Here we go directories"
	mkdir $(PATHDIR)/$(DIRECTORY1)
...

setwd:
	@echo "Here we go set working directories"
	sed -i '1i setwd("$(PATHDIR)/$(DIRECTORY1)/$(FILE1)")' $(PATHDIR)/$(DIRECTORY1)/$(FILE1)/$(FILE1.2)
...

rbatch:
	@echo "Here we go rbatch ++==>"
	qsub $(PATHDIR)/$(DIRECTORY1)/$(FILE1)/$(FILE1.3)
...


filemerge:
	@echo "Here we go filemerge"
	cat $(PATHDIR)/$(DIRECTORY1)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY2)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY3)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY4)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY5)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY6)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY7)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY8)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY9)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY10)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY11)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY12)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY13)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY14)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY15)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY16)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY17)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY18)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY19)/$(FILE2.1) $(PATHDIR)/$(DIRECTORY20)/$(FILE2.1) > Rallsourcepopsummaryoutput.csv
	cat $(PATHDIR)/$(DIRECTORY1)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY2)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY3)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY4)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY5)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY6)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY7)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY8)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY9)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY10)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY11)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY12)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY13)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY14)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY15)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY16)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY17)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY18)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY19)/$(FILE2.2) $(PATHDIR)/$(DIRECTORY20)/$(FILE2.2) > Rallnewpopsummaryoutput.csv
	cat $(PATHDIR)/$(DIRECTORY1)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY2)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY3)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY4)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY5)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY6)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY7)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY8)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY9)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY10)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY11)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY12)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY13)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY14)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY15)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY16)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY17)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY18)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY19)/$(FILE2.3) $(PATHDIR)/$(DIRECTORY20)/$(FILE2.3) > Rallsourcepopcondensed_individuals.csv
	cat $(PATHDIR)/$(DIRECTORY1)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY2)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY3)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY4)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY5)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY6)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY7)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY8)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY9)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY10)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY11)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY12)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY13)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY14)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY15)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY16)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY17)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY18)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY19)/$(FILE2.4) $(PATHDIR)/$(DIRECTORY20)/$(FILE2.4) > Rallnewpopcondensed_individuals.csv
	
output:
	@echo "Here we go output"
	mkdir temporary
	cp -r $(PATHDIR)/$(FILE1) ./temporary
	cp -r $(PATHDIR)/Makefile ./temporary
	cp -r $(PATHDIR)/$(DIRECTORY1)/$(FILE1)/$(FILE1.2) ./temporary
	cp -r $(PATHDIR)/Rallsourcepopsummaryoutput.csv ./temporary/allsourcepopsummaryoutput.csv
	cp -r $(PATHDIR)/Rallnewpopsummaryoutput.csv ./temporary/allnewpopsummaryoutput.csv
	cp -r $(PATHDIR)/Rallsourcepopcondensed_individuals.csv ./temporary/allsourcepopcondensed_individuals.csv
	cp -r $(PATHDIR)/Rallnewpopcondensed_individuals.csv ./temporary/allnewpopcondensed_individuals.csv
	mv temporary output`date +%m.%d.%y_%H.%M`

Allclean:
	/bin/rm -r R*



