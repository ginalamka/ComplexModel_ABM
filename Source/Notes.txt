Project Flow:
set parameters >                                 #set variables
  init pop and source >                          #create pops
    AgeUp >                                      #age pop + 1 year
      DeathbyAge >                               #age-dependent mortality
        RandomDeath >                            #random mortality
          Migrate >                              #subpop migration
            MateChoice >                         #find partner(s)
              PopSizeNext >                      #determine pop size and trend
                Breed >                          #get freaky
                  OffspringAssign >              #assign offspring alleles
                    Repeat >                     #replicate
                      Analyze >                  #analyze the outcome
                        Validate                 #compare to real data


Notes that may be helpful in the future:

- validate the model [look at pattern oriented modeling slides from class] 
  by double checking if alleles are added and lost to the population at the same rate as expected (1/2N)
  this will be done with heterozygosity values of the population following migration
  different allele frequencies of migrants will induce the changes here as a pattern
  compare this rate to the equation of loss of genetic diversity 1/2Ne to examine trends
  this works because I am giving indv allele frequ, but not for the whole population
  
- theory testing: vary the sizes of source and focal pops to examine density-dependent effects
  I could also add in habitat complexity to determine how that affects migration

- in krats, breeding is polygynandrous, which means multiple females breed with multiple males
  https://academic.oup.com/jmammal/article/94/6/1258/903126
  
- currently, migration is by # of indv, but in future, should be 0-10% of population
  consider *why* indv may move - boldness, resources, looking for less density
  consider male vs female migrants

- can do a fitness-dependent behavior, but not multiple. 
  this can be either mate choice, fitness-dependent death, or migration behavior, consider implications of each

- offspring should inherit alleles from mom/dad, not be assigned randomly
  assign microsat and SNP loci, not just A/a alleles
  
- consider sex ratio - should this vary year to year or be ~1:1

- notes on operators in R https://www.tutorialgateway.org/logical-operators-in-r/

- notes on BREAK / NEXT - for example, check if there are more pairs to iterate over, if no, Break
  https://statisticsglobe.com/r-break-next-function-for-loop-example
  
- if matrix is wierd, one way to check dimensions is to do dim(pop), dim(source), etc.

#other things to consider later --- shrinking K over time to simulate habitat destruction
#add in mutation??
#make sure that migrants are prefered for matechoice - do this by first adding pairs with migrants, then adding in the random other pairs
    #this will make it so that I am tracking effective migrants rather than actual migrants. 
    
    
Notes from weekly meeting 11/1/2021
#how to analyze these data
  He, Ho, mean lifetime reproductive success (fitness), number of migrants?, population size over time
  Note: while keeping the starting source and focal pop, I can calc the difference in hetero, etc before and after the simulation!
  #make sure to include paramtere values: rr (replicate), year, k, [anything that will be variable across runs], THEN the output data
  
NOTE: when finished with the code, use this R Style Guide to clean it up
  https://web.stanford.edu/class/cs109l/unrestricted/resources/google-style.html
  
#before adding in a bunch of parameter combos, do one and look at file size because YOU COULD KILL ALL STORAGE ON COMPUTER
#therefore dont make it too crazy at once, just get something to work for class. 

##QUESTIONS 11/11/2021
I am tracking alleles specifically from migrants following reproduction. if an ancestor is a migrant, the alleles will be 1, 
if they are not migrants, the allele is 0. when creating babies, I would like to do some sort of conditional so that 
if a parent or ancestor is a migrant (a negative ID number), then the allele should be a 1, if not, 0. 
tried if, ifelse, apply

instead of the above idea, add 1000 additional migratory SNPs so that migrants all =1 and nonmig=0 and then go through mendelian genetics from then on. 